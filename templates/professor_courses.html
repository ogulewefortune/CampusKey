{% extends "base.html" %}

{% block content %}
<div class="page-container">
    <div class="page-header">
        <h1 class="page-title">My Courses</h1>
        <p class="page-subtitle">Manage your courses</p>
    </div>

    <div class="content-section">
        <div class="section-card">
            <div class="card-header">
                <h2 class="card-title">Course List</h2>
                <button class="primary-btn" onclick="showAddCourseForm()">+ Add Course</button>
            </div>

            {% if courses %}
            <div class="course-list">
                {% for course in courses %}
                <div class="course-item">
                    <div class="course-info">
                        <h3>{{ course.code }} - {{ course.name }}</h3>
                        <p>Created: {{ course.created_at.strftime('%Y-%m-%d') }}</p>
                    </div>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <p>No courses yet. Add your first course!</p>
            {% endif %}
        </div>

        <!-- Add Course Modal -->
        <div id="addCourseModal" class="modal" style="display: none;">
            <div class="modal-content">
                <span class="close" onclick="closeModal()">&times;</span>
                <h2>Add New Course</h2>
                <form id="addCourseForm">
                    <div class="form-group">
                        <label>Course Code:</label>
                        <input type="text" id="courseCode" placeholder="e.g., CS101" required>
                    </div>
                    <div class="form-group">
                        <label>Course Name:</label>
                        <input type="text" id="courseName" placeholder="e.g., Introduction to Computer Science" required>
                    </div>
                    <button type="submit" class="primary-btn">Add Course</button>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
function showAddCourseForm() {
    document.getElementById('addCourseModal').style.display = 'block';
}

function closeModal() {
    document.getElementById('addCourseModal').style.display = 'none';
}

document.getElementById('addCourseForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const data = {
        code: document.getElementById('courseCode').value,
        name: document.getElementById('courseName').value
    };
    
    fetch('/professor/add-course', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify(data)
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            alert(data.message);
            location.reload();
        } else {
            alert('Error: ' + data.error);
        }
    });
});
</script>
{% endblock %}

